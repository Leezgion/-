# vite.config.js

```javascript
import path from 'path';
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import css from '@vitejs/plugin-css'
import babel from '@vitejs/plugin-babel'
import json from '@rollup/plugin-json'
import html from '@vitejs/plugin-html'
import replace from 'rollup-plugin-replace'
import copy from 'rollup-plugin-copy'

export default defineConfig({//-----------------------------------类型                          作用
 plugins: [//----------------------------------------------------Array                      用于配置Vite插件。Vite插件可以在构建过程中执行自定义操作，例如转换代码、添加全局变量、修改构建输出等。
  vue(),//------------------------------------------------------                          用于处理.vue文件，包括解析模板、编译脚本、处理样式等。
  css(),//------------------------------------------------------                            用于处理CSS文件，包括提取CSS、自动添加前缀、压缩等。
  babel(),//----------------------------------------------------                            用于将ES6+语法转换为ES5语法，使得代码可以在较老的浏览器上运行
  json(),//-----------------------------------------------------                            用于处理JSON文件，将其转换为JavaScript模块。不需要安装额外依赖。
  html(),//-----------------------------------------------------                            用于处理HTML文件，包括处理模板、压缩等。
  replace(),//--------------------------------------------------                            用于替换代码中的特定字符串，例如修改环境变量、替换API地址等
  copy(),//-----------------------------------------------------                            用于复制静态文件到构建目录中，例如图片、字体等
  ]
  root: process.cwd(),//------------------------------------------string                    指定项目的根目录。默认为进程的当前工作目录。
  base: '/',//----------------------------------------------------string                    指定在服务器运行时提供服务的基本路径。
  mode: 'development',//--------------------------'development' | 'production' | 'test'     指定当前构建模式。
  server: {//--------------------------------------------------ServerOptions                配置开发服务器选项。这些选项包括服务器的地址和端口号、代理、HMR 等。
    host: 'localhost',//------------------------------------------string                    服务器的主机名。
    port: 3000,//-------------------------------------------------number                    服务器的端口号。
    strictPort: true,//-------------------------------------------boolean                   如果设为 true，则在端口被占用时会报错，防止意外增加安全隐患。默认为 true
    https: { //-----------------------------------------------boolean|object                是否使用 HTTPS 协议，默认为 false。可以是一个对象，包含 key 和 cert 字段，分别指代 TLS 的密钥和证书的路径，也可以是一个简单的布尔值 true，使用默认的密钥和证书
      key: 'path/to/key.pem',
      cert: 'path/to/cert.pem',
    },
    open: false, //-----------------------------------------------boolean                   是否在服务启动后自动打开浏览器，默认为 false
    proxy: {//-------------------------------------------------ProxyOptions                 配置服务器代理选项，用于解决本地开发时前后端分离带来的跨域问题。
      '/api': {
        target: 'http://localhost:4000',//------------------------string                    需要代理的 API 接口。
        changeOrigin: true,//-------------------------------------boolean                   是否改变请求头中的源地址，默认为 false。
        rewrite: (path) => path.replace(/^\/api/, ''),//----------                          设置请求路径重写规则，可对地址进行拦截和替换。
      },
    },
    cors: false, //-----------------------------------------------boolean                   设置跨域谨慎使用.是否启用跨域，默认为 false。如果想保持现有的 web 服务器运行，而无法使用 proxy，则可以启用 cors。
    fs: {//-------------------------------------------------------boolean                   与 fs 模块有关的服务端选项
      strict: false, //-------------------------------------------boolean                   是否启用严格的文件权限校验，默认为 true
    },
    hmr: {//------------------------------------------------------                          配置服务器的 HMR 选项,用于实现模块热更新的功能。
      overlay: true,//--------------------------------------------boolean                   是否在浏览器中全屏显示编译器错误信息，默认为 false
      port: 443,//------------------------------------------------number                    WebSocket 端口，默认与服务器端口相同。如果是 HTTPS 协议，则默认为 443
      path: '/__webpack_hmr',//-----------------------------------string                    HMR WebSocket 地址，默认为 /__hmr
      timeout: 3000, //-------------------------------------------number                    HMR 超时时间，默认为 3000 毫秒
      reload: true, //--------------------------------------------boolean                   是否在失败时刷新页面。如果设置为 false，则只会提供错误提示
    },
    optimizeDeps: {//---------------------------------------------                          // 制定需要预安装的依赖包
      include: ['lodash', 'moment'],
      exclude: ['chalk'],
      link: ['vue'],
    },
  },
  build: {//------------------------------------------------------BuildOptions              配置构建选项。这些选项包括输出路径、输入文件、压缩选项等。
    outDir: 'dist',//---------------------------------------------string                    指定输出的目录。如果设置为空字符串 ''，则静态资源将会直接被放到 outDir 中。
    assetsDir: '',//----------------------------------------------string                    指定生成的静态资源的目录。默认为空字符串。
    sourcemap: false,//-------------------------------------------boolean                   是否开启 sourcemap,source map 文件可以用于在浏览器开发者工具中调试源代码。默认为 false
    minify: true,//------------------------------------------boolean|object                 是否压缩代码。可通过传递一个布尔值或一个对象来覆盖默认值细化控制。默认为 true
    cleanCss: true,//---------------------------------------------boolean                   是否压缩 CSS。默认为 true,即会将 CSS 拆分为一个单独的文件。
    brotliSize: true,//-------------------------------------------boolean                   是否自动检测生成的文件的体积，并生成对应的 .br 压缩文件。默认为 true
    rollupOptions: {//--------------------------------------------                          配置 Rollup 打包工具的选项。
      input: './src/main.js',//-----------------------------------string                    设置入口文件，相对路径，默认为 './src/main.js'
      output: {//-------------------------------------------------                          模块的输出配置
        file: './dist/bundle.js',//-------------------------------string                    输出文件路径，默认为 './dist/index.js'
        format: 'cjs',//------------------------------------------string                    指定输出文件的格式: 'amd', 'cjs', 'system', 'esm', 'iife', 'umd'
        assetFileNames: 'assets/[name].[ext]',
        sourcemap: false,
        name: 'MyLibrary',//--------------------------------------string                    输出文件名
        exports: 'default',//-------------------------------------string                    打包后的模块名
      },
    },
    watch: {//----------------------------------------------------                          配置监视选项。
      clearScreen: true,
    },
  },
  resolve: {//----------------------------------------------------                          处理模块依赖项时提供的配置。它用来配置 Vite 如何解析导入语句中的模块路径
    alias: {//------------------------------------------------object|array                  设置模块路径的别名。如果是对象，则键为别名，值为对应的绝对路径。如果是数组，则每个元素是一个别名的配置对象，包含 find 和 replace 两个属性，分别表示需要替换的字符串和替换后的内容。
      '@': path.resolve(__dirname, './src'),
    },
    extensions: ['.js','.mjs','ts', '.jsx','tsx', '.json', '.vue'],//-array                 设置可以省略的文件扩展名
    mainFields: ['module', 'main','browser'],//-----------------------------                          按数组元素的顺序解析文件的哪个字段作为模块的入口文件
    mainFiles: ['index.ts', 'index.js'],//------------------------                          指定目录下哪个文件名被视为入口文件
    symlinks:true,//----------------------------------------------boolean                   是否解析符号链接所指向的真实路径。默认为 true。
    modules:['node_modules']//--------------------------------string|array                  配置模块的查找方式，可以是字符串或者数组。例如，如果设置为 ['node_modules']，则只会从根目录下的 node_modules 目录中查找模块。
  },
  optimizeDeps: {
    include: ['lodash', 'moment'],
    exclude: ['chalk'],
    link: ['vue'],
  },
});
```
