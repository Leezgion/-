# WEBPACK

## Webpack 是什么

>webpack是一个流行的前端构建工具,它可以帮助我们打包和管理前端代码.

## Webpack 有什么用

webpack的主要功能包括:

1. **代码转换与优化** - webpack将前端的js、jsx、ts、tsx、css、图片等静态资源视为模块,通过loader和plugin在打包过程中对其进行转译和优化,最终生成浏览器可运行的静态文件.支持将ES6/7代码转为ES5代码,将TypeScript转为JavaScript,将SCSS/LESS转为CSS,将图片压缩等.
2. **依赖管理与打包** - webpack会根据代码之间的依赖和引用关系,生成文件的依赖图,避免代码重复加载.并最终将这些文件打包成一个或多个bundle,利用模块化和浏览器缓存提高性能.
3. **代码分割和按需加载** - webpack允许我们将代码分割成不同的chunk,在初始加载页面时只加载必要部分,然后按需加载其他功能代码,降低初始加载耗时.
4. **开发环境集成** - webpack内置了一个快速运行的开发服务器,具有实时重新加载和模块热替换功能,使得代码的修改能够实时生效而无需完全刷新.极大提高开发效率.
5. **自动化构建** - webpack允许通过配置文件对不同环境、不同目标进行自动化构建.可以构建出生产版本的线上代码,并优化到最小文件体积、最快加载速度.也可以构建出本地开发环境的代码实现快速迭代.
6. **扩展插件机制** - webpack提供了丰富的插件接口,通过使用不同的loader和plugin可以控制整个构建过程,实现复杂的自定义功能,让webpack可以应对多种多样的前端工程化场景,满足复杂的需求.

使用webpack的好处主要有:

1. 大大提高了前端代码的开发效率,通过loader和plugin处理多语言文件.
2. 将前端代码进行了更好的组织和优化,方便代码的维护和扩展.
3. 可以极大减小打包文件体积,加快页面加载速度.
4. 为复杂的单页应用提供良好的代码管理功能.

## Webpack 适合什么场景下使用

1. 单页应用(SPA):这种应用通过动态重写当前页面来与用户交互,避免了页面跳转,webpack可以将代码模块化并打包成一个文件,极大减少页面加载时间.
2. 大型复杂的前端项目:利用webpack的代码拆分功能,可以将项目代码按功能划分成不同chunk,实现按需加载,减少初始下载代码量.且易于项目代码的维护和扩展.
3. 兼容低版本浏览器:如需要转换编译如ES6、TypeScript、LESS、SASS等的项目,可以通过webpack提供的loader机制在构建过程中转换代码,将其转为当前浏览器可支持的格式.
4. 需要优化性能和加载速度的项目:通过webpack提供的代码压缩、tree shaking、chunk、按需加载等功能,可以显著优化前端代码的性能和加载速度

## Webpack 的运行流程

>1. `初始化参数`:从配置文件和命令行语句中读取与合并参数,得出最终的参数.这一步通常涉及将来自不同来源的参数进行合并和处理,以确保最终得到一个完整且合理的参数集合.
>2. `开始编译`:用上一步得到的参数初始化 Compiler 对象,加载所有配置的插件,执行对象的 run 方法开始执行编译.这一步是整个编译过程的开始,其中 Compiler 对象是 Webpack 的核心对象,负责管理整个编译过程.Webpack 会触发一系列事件,插件可以监听这些事件来执行各种自定义操作.
>3. `确定入口`:根据配置中的 entry 找出所有的入口文件.入口文件是整个应用程序的起点,Webpack 根据这些入口文件来构建整个依赖图谱.
>4. `编译模块`:从入口文件出发,Webpack 开始进行模块的解析和编译.这一步涉及解析文件路径、查找模块、解析别名等操作.然后,Webpack 调用所有配置的 Loader 对模块进行翻译.这个过程中,每个模块会经过一系列 Loader 的处理,最终被转换成可执行的 JavaScript 代码.同时,Webpack 还会找出模块依赖的其他模块,然后递归地处理这些依赖的模块,直到所有入口依赖的文件都经过了处理.
>5. `完成模块编译`:在经过编译模块的步骤后,Webpack 得到了每个模块被翻译后的最终内容以及它们之间的依赖关系.这一步还包括对模块进行优化和处理,比如 Tree Shaking、代码分割等.
>6. `输出资源`:根据入口和模块之间的依赖关系,Webpack 开始将模块组装成一个个包含多个模块的 Chunk.然后,Webpack 对每个 Chunk 进行进一步的处理和优化,比如压缩、合并等.最终,Webpack 将每个 Chunk 转换成一个单独的文件加入到输出列表.这一步也是对资源进行进一步处理和优化的机会.
>7. `输出完成`:在确定好输出内容后,Webpack 根据配置确定输出的路径和文件名,然后把文件内容写入到文件系统中.这一步也可以包括一些额外的处理,比如版本管理、发布到 CDN 等.
>
>Webpack 运行流程完成后,用户就可以得到最终的打包结果,用于部署到生产环境或者其他用途.
